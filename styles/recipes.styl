@require 'constants'

.swipable-wrapper
  display inline-block
  height 100%

.recipe-view, .editable-recipe-view
  .title-bar, .button-bar
    background-color grey8
    color grey0

  .fixed-header, .title-bar
    border-top-left-radius inherit
    border-top-right-radius inherit

.recipe-view
  .recipe-description > :nth-child(odd)
    background-color grey1

  .fixed-content-pane
    background-color grey0

  .recipe-description
    // Make iPhone overscroll look less dumb.
    > :first-child
      border-top 1px solid grey2
    // Ideally we could fill any remaining space with the last block's background color, but this will do.
    > :not(:last-child), > :last-child:nth-child(odd)
      border-bottom 1px solid grey2

    .recipe-ingredients, .recipe-instructions, .recipe-notes
      padding 0 20px 20px

    .recipe-section-header
      font-size uppercase-font-size
      text-transform uppercase
      text-align center

      padding 16px 0 16px

    .recipe-ingredients .measured-ingredient
      display flex
      font-weight 600

      .measure
        width 30%

        .unit
          font-size 0.75em
          text-transform uppercase

      .ingredient
        width 70%

    .recipe-instructions .text .text-line:not(:last-child)
      margin-bottom 6px

    .recipe-notes
      //

  .fixed-header, .fixed-footer
    border-bottom-left-radius inherit
    border-bottom-right-radius inherit

.editable-recipe-view
  .title-bar input
    width 90%
    height 100%

    text-align center

    color grey0
    font-weight 600
    font-size title-font-size

    background transparent
    border none

    &::-webkit-input-placeholder
      color grey3
      font-weight 600
      font-size title-font-size

  .fixed-content-pane
    background-color grey0

  .editable-ingredient
    display flex
    position relative

    margin 8px 8px 0 8px

    > *
      line-height touch-element-height
      height touch-element-height
      display inline-block
      box-sizing border-box

    .remove-button
      width touch-element-height
      vertical-align center
      text-align center

      margin-right 6px

      background-color darken(grey0, 3%)
      border 1px solid grey2
      border-radius standard-border-radius

      i.fa
        line-height inherit

    .editable-text-field
      margin-left 2px

      &.is-editing  input
        position absolute
        top 0
        left 0

      input
        width 100%
        height 100%

        padding-left 4px
        padding-right 4px
        border 1px dashed grey2

        background-color grey1
        font-size body-font-size

      &:nth-child(2)
        flex 1

        input
          border-top-left-radius standard-border-radius
          border-bottom-left-radius standard-border-radius

      &:nth-child(3)
        flex 2

        input
          border-top-right-radius standard-border-radius
          border-bottom-right-radius standard-border-radius

  button
    width calc(100% - 16px)
    box-sizing border-box
    line-height touch-element-height

    margin-left 8px
    margin-top 8px

    font-size body-font-size
    color grey7
    text-transform uppercase
    background-color grey2

    border none
    padding 0
    border-radius standard-border-radius

.editable-recipe-view .editable-ingredient-2
  position relative
  display flex

  .tile
    border-radius standard-border-radius
    height touch-element-height

    margin-right 8px

    &:first-child
      margin-left 8px

  &.is-editing-text
    .Select
      .Select-control
        background-color grey7
        transition transition-duration background-color

      &.has-value .Select-placeholder
        color grey2
        transition transition-duration color

  .Select
    flex 1
    transition 1s flex

    &.is-focused:not(.is-open) .Select-control
      box-shadow none
      border-color grey2

    &.has-value
      .Select-control
        border 1px solid grey2

    .Select-control
      background-color darken(grey0, 3%)

      border 1px dashed grey2
      height touch-element-height

      transition transition-duration background-color

      > *
        margin-top 3px

    .Select-menu
      max-height 108px

    .Select-option
      background-color grey0
      color grey8

      &.is-focused
        background-color grey0
        color grey8

  .edit-button, .save-button
    box-sizing border-box
    width touch-element-height
    line-height touch-element-height
    vertical-align middle
    text-align center

    background-color darken(grey0, 3%)
    border 1px solid grey2
    border-radius standard-border-radius

    &.animate-in
      width 0
      animation to-standard-width transition-duration ease forwards

    i.fa
      line-height inherit
      font-size icon-font-size

    &.disabled
      color grey2

  input.clarifying-text
    position absolute
    right touch-element-height + 16px
    height touch-element-height

    border-radius standard-border-radius
    border 1px solid grey2
    background-color darken(grey0, 3%)
    font-size body-font-size
    line-height body-font-size
    padding-left 8px

    &.animate-in
      width "calc(100% - %s)" % (touch-element-height + 48px + 16px)
      opacity 1
      transition width transition-duration, opacity .1s ease

    &.animate-out
      width touch-element-height
      opacity 0
      pointer-events none
      transition width transition-duration, opacity .1s ease (transition-duration - .1s)

    &::-webkit-input-placeholder
      padding-top 2px

@keyframes to-standard-width
  to
    width touch-element-height

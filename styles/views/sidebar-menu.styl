@require '../shared/animation'
@require '../shared/mixins'

$item-height = 44px
$items-above-ingredients-list = 2

$slider-thumb-shrink-height = 4px
$slider-thumb-shrink-width = 10px
$slider-thumb-width = $item-height
$slider-track-width = 8px

.sidebar-menu
  background-color: #393939
  color: #ddd
  height: 100%

  .return-button, .ingredients-button, .mixability-title, .mixability-options .option
    height: $item-height
    line-height: $item-height

  .return-button, .ingredients-button
    border-bottom: 1px solid lighten(#393939, 10%)

  .ingredients-button, .mixability-title
    padding-left: 8px

  .return-button
    text-align: right
    text-transform: uppercase
    font-size: 0.9em

    .text
      margin-right: 8px

    i.fa
      margin-right: 8px

  .ingredients-button
    position: relative

    svg
      vertical-align: middle
      margin-top: -9px

      path
        fill: #999

    .text
      margin-left: 8px

    .count
      padding: 0 4px
      position: absolute
      top: 13px
      right: 13px
      min-width: 18px
      line-height: 18px
      background: #4a4a4a
      border-radius: 4px
      font-size: 14px
      font-weight: 700
      text-align: center

    z-index: 1
    box-shadow: none
    transition: box-shadow $transition-duration

    &.showing-list
      shadow('bottom', 3px)

  .expanding-ingredients-wrapper
    height: 0
    overflow: scroll
    transition: height $transition-duration
    background: #434343
    position: relative
    -webkit-overflow-scrolling: touch

    .search-bar
      background: #393939
      margin-bottom: 1px

      .fa
        color: #aaa

      .search-input
        color: #eee

    .empty-list-text
      color: #aaa

    &.visible
      height: "calc(100% - %s)" % ($items-above-ingredients-list * $item-height)

  .mixability-title
    text-transform: uppercase
    font-size: 0.9em
    color: #999
    font-weight: 600

  .mixability-options-container
    position: relative

    .input-wrapper
      // Due to the weird sizing that happens when you rotate, force the expected size here.
      // height: 3 * $item-height
      // width: $item-height
      position: absolute
      left: 0

    input[type=range]
      // http://stackoverflow.com/questions/24369879/styling-a-vertical-html5-range-input
      // This also causes almost all the other styling rules to be flipped width-for-height.
      transform: rotate(90deg)
      transform-origin: 0 100%
      -webkit-appearance: none

      width: 3 * $item-height - ($slider-thumb-shrink-height * 2)
      height: $slider-thumb-width
      margin-top: (- $slider-thumb-width) + $slider-thumb-shrink-height

      &::-webkit-slider-runnable-track
        height: $slider-track-width
        margin: ($slider-thumb-width - $slider-track-width) / 2 0
        background-color: darken(#393939, 20%)
        border-radius: 4px

      &::-webkit-slider-thumb
        -webkit-appearance: none
        width: $item-height - ($slider-thumb-shrink-height * 2)
        height: $slider-thumb-width - ($slider-thumb-shrink-width * 2)
        margin-top: (- ($slider-thumb-width - $slider-track-width) / 2) + $slider-thumb-shrink-width
        background-color: #999
        border-radius: 18px

    .mixability-options
      width: 100%

      .option
        padding-left: $item-height

        i.fa
          float: right
          margin-right: 16px
          font-weight: 400

        &:not(.is-selected)
          color: #999

          .fa-check
            display: none

        &.is-selected
          font-weight: 600

          .fa-times
            display: none
            font-weight: 400


